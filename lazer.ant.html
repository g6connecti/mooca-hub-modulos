<p style="text-align:center; margin-bottom:20px; font-size:1.1em; color:#00ffff;">
  Principais Opções de Lazer, Parques, Shoppings, Teatros, Espaços Culturais, Clubes no Bairro e Arredores e Locais para Atividades da 3ª Idade.
</p>

<div id="map" style="height:400px; border-radius:8px; margin:20px 0;"></div>

<div class="lista-estabelecimentos">
  <!-- Toda a lista anterior aqui (Centros Culturais, Parques, Shoppings, Teatros, Clubes) -->
  <!-- ... cole aqui o conteúdo da lista que já tinha (SESC, Parque da Mooca, etc.) ... -->

  <p class="section-separator">Atividades Gratuitas e Lazer para a 3ª Idade</p>

  <!-- Toda a seção de 3ª idade que você passou -->
  <div class="lazer-item">
    <h3>Centro Esportivo Mooca (Clube Escola)</h3>
    <p>É um dos principais pontos da região. Oferece diversas atividades gratuitas para idosos, como vôlei adaptado, alongamento, tai chi chuan, pilates, yoga e dança circular. Também conta com o Playground da Longevidade, com equipamentos de ginástica específicos.</p>
    <p><strong>Endereço:</strong> Rua Taquari, 635 - Mooca, São Paulo - SP.</p>
    <p>Site: Secretaria Municipal de Esportes.</p>
  </div>

  <!-- ... cole aqui os outros itens da 3ª idade (MOPI, CDI, Yoga Mooca, Residenciais, Sesc TSI, Faculdades) exatamente como na versão anterior ... -->

</div>

<p style="margin-top:25px; font-size:0.9em; text-align:center; color:#ff9800;">
  Clique nos pins do mapa para ver cada local. Informações sujeitas a alteração — confirme horários e disponibilidade.
</p>

<script>
// Função para inicializar o mapa de forma segura e com retry
function initLazerMap() {
  const mapContainer = document.getElementById('map');
  if (!mapContainer) {
    console.warn('Elemento #map ainda não encontrado. Tentando novamente em 500ms...');
    setTimeout(initLazerMap, 500);
    return;
  }

  if (typeof L === 'undefined') {
    console.error('Leaflet (L) não carregado. Verifique se o script do Leaflet está no <head> do index.html.');
    return;
  }

  try {
    // Limpa se já existir instância (evita erros de "map already initialized")
    if (mapContainer._leaflet_id) {
      mapContainer._leaflet_map.remove();
    }

    var map = L.map('map').setView([-23.558, -46.595], 14);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Pins principais (exemplos aproximados)
    L.marker([-23.5405, -46.5890]).addTo(map).bindPopup('SESC Belenzinho<br>Rua Padre Adelino, 1.000');
    L.marker([-23.5620, -46.5920]).addTo(map).bindPopup('Parque da Mooca / Clube Escola<br>Rua Taquari, 573/635');
    L.marker([-23.5585, -46.5900]).addTo(map).bindPopup('Parque Sabesp Mooca<br>Av. Paes de Barros, 2107');
    L.marker([-23.5700, -46.6020]).addTo(map).bindPopup('Mooca Plaza Shopping<br>Rua Capitão Pacheco e Chaves, 313');
    L.marker([-23.5450, -46.5950]).addTo(map).bindPopup('Museu da Imigração<br>Rua Visconde de Parnaíba, 1316');
    L.marker([-23.5680, -46.6000]).addTo(map).bindPopup('Lilith Comedy Club<br>Rua Capitão Pacheco e Chaves, 981');
    L.marker([-23.5625, -46.5925]).addTo(map).bindPopup('Clube Atlético Juventus<br>Rua Comendador Roberto Ugolini, 20');
    L.marker([-23.5550, -46.5850]).addTo(map).bindPopup('Clube Atlético Parque da Mooca<br>Rua Padre Raposo, 837');
    L.marker([-23.5750, -46.6050]).addTo(map).bindPopup('Leão do Norte Futebol Clube<br>Rua Passarola, 85');

    // Pins extras para 3ª idade (aproximados)
    L.marker([-23.5620, -46.5920]).addTo(map).bindPopup('CDI Mooca<br>Rua dos Campineiros, 513');
    L.marker([-23.5500, -46.5900]).addTo(map).bindPopup('Yoga Mooca<br>Rua Rivadávia Correia, 84');
    L.marker([-23.5600, -46.5950]).addTo(map).bindPopup('Bella Mooca<br>Rua João Antônio de Oliveira, 915');
    L.marker([-23.5580, -46.5930]).addTo(map).bindPopup('Terça da Serra Mooca<br>Rua Dom Joaquim de Melo, 319');
    L.marker([-23.5620, -46.5920]).addTo(map).bindPopup('São Judas Tadeu Mooca<br>Rua Taquari, 546');
    L.marker([-23.5630, -46.5940]).addTo(map).bindPopup('Anhembi Morumbi Mooca<br>Rua Dr. Almeida Lima, 1134');

    console.log('Mapa inicializado com sucesso!');
  } catch (error) {
    console.error('Erro ao criar mapa:', error);
  }
}

// Chama a função com delay inicial e retry se necessário
setTimeout(initLazerMap, 800);
</script>

